(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a7a9da4"],{"1ed7":function(t,e,a){},"51a9":function(t,e,a){"use strict";a.d(e,"e",(function(){return l})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"f",(function(){return p})),a.d(e,"h",(function(){return c})),a.d(e,"g",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"d",(function(){return m}));var i=a("b775"),n=a("83d6"),s=a.n(n);function l(t){return Object(i["a"])({url:s.a.host.api+"/api/pipeline/list",method:"get",params:t})}function o(t){return Object(i["a"])({url:s.a.host.api+"/api/pipeline/get",method:"get",params:t})}function r(t){return Object(i["a"])({url:s.a.host.api+"/api/pipeline/create",method:"post",data:t})}function p(t){return Object(i["a"])({url:s.a.host.api+"/api/pipeline/update",method:"post",data:t})}function c(t){return Object(i["a"])({url:s.a.host.api+"/api/pipeline/update/status",method:"post",data:t})}function u(t){return Object(i["a"])({url:s.a.host.api+"/api/pipeline/update/mode",method:"post",data:t})}function d(t){return Object(i["a"])({url:s.a.host.api+"/api/pipeline/delete",method:"post",data:t})}function m(t){return Object(i["a"])({url:s.a.host.api+"/api/pipeline/is_filter",method:"get",params:t})}},"623b":function(t,e,a){"use strict";a("1ed7")},dfc2:function(t,e,a){"use strict";function i(t){if(""===t||void 0===t)return"";var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}a.d(e,"a",(function(){return i}))},f68b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8,xs:24}},[a("info-card",{attrs:{bitem:t.bitem}})],1),a("el-col",{attrs:{span:14,xs:24}},[a("el-card",[a("el-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:t.$t("pipe_detail.filter"),name:"filter"}},[a("pfilter",{attrs:{list:t.bitem.pipeline.filters,pipe_name:t.bitem.pipeline.name}})],1),a("el-tab-pane",{attrs:{label:t.$t("pipe_detail.govern"),name:"govern"}},[a("govern",{attrs:{govern_form:t.govern_form,bitem:t.bitem,instance:t.bitem.info.instance,pipe_name:t.bitem.pipeline.name}})],1),a("el-tab-pane",{attrs:{label:t.$t("pipe_detail.instance"),name:"instance"}},[a("instance",{attrs:{instance:t.bitem.info.instance}})],1),a("el-tab-pane",{attrs:{label:t.$t("pipe_detail.event"),name:"event"}},[a("event",{attrs:{list:t.events}})],1)],1)],1)],1)],1)],1)},n=[],s=a("5530"),l=(a("a9e3"),a("b0c0"),a("a15b"),a("2f62")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticStyle:{"margin-bottom":"20px"},attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.$t("pipe_detail.runStatus")))]),a("el-switch",{staticStyle:{float:"right",padding:"3px 0",display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"run","inactive-value":"stop"},on:{change:t.handleModifyStatus},model:{value:t.bitem.pipeline.status,callback:function(e){t.$set(t.bitem.pipeline,"status",e)},expression:"bitem.pipeline.status"}})],1),a("el-card",{staticStyle:{"margin-bottom":"18px"},attrs:{shadow:"never"}},[a("div",{staticClass:"user-profile"},[a("div",{staticClass:"box-center"},[a("div",{staticClass:"user-name text-center"},[t._v(t._s(t.bitem.pipeline.aliasName))]),a("div",{staticClass:"user-role text-center text-muted"},[t._v(t._s(t.bitem.pipeline.name))])])])]),a("el-card",{staticStyle:{"margin-bottom":"18px"}},[a("div",{staticClass:"user-bio"},[a("div",{staticClass:"user-education user-bio-section"},[a("div",{staticClass:"user-bio-section-header"},[a("svg-icon",{attrs:{"icon-class":"education"}}),a("span",[t._v(t._s(t.$t("pipe_detail.remark")))])],1),a("div",{staticClass:"user-bio-section-body"},[a("div",{staticClass:"text-muted"},[t._v(t._s(t.bitem.pipeline.remark))])])])])]),a("el-card",[a("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:30}},[a("span",[t._v(t._s(t.$t("pipeline.createTime")))])]),a("el-col",{staticStyle:{float:"right"},attrs:{span:70}},[a("span",[t._v(t._s(t.dateFormat(t.bitem.pipeline.create_time)))])])],1),a("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:30}},[a("span",[t._v(t._s(t.$t("pipeline.mysqlMode")))])]),a("el-col",{staticStyle:{float:"right"},attrs:{span:70}},t._l(t.$t("pipeline.mysqlModeOptions"),(function(e){return a("div",{staticClass:"text-muted"},[e.key===t.bitem.pipeline.mysql.mode?a("span",[t._v(t._s(e.value))]):t._e()])})),0)],1),a("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:30}},[a("span",[t._v(t._s(t.$t("pipeline.output.sender.type")))])]),a("el-col",{staticStyle:{float:"right"},attrs:{span:70}},t._l(t.$t("pipeline.output.sender.typeOptions"),(function(e){return a("div",{staticClass:"text-muted"},[e.key===t.bitem.pipeline.output.sender.type?a("span",[t._v(t._s(e.value))]):t._e()])})),0)],1),a("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:30}},[a("span",[t._v(t._s(t.$t("pipeline.mysqlAddress")))])]),a("el-col",{staticStyle:{float:"right"},attrs:{span:70}},[t._v(" "+t._s(t.bitem.pipeline.mysql.address)+" ")])],1),a("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:30}},[a("span",[t._v(t._s(t.$t("pipeline.mysqlPort")))])]),a("el-col",{staticStyle:{float:"right"},attrs:{span:70}},[a("span",[t._v(t._s(t.bitem.pipeline.mysql.port))])])],1),a("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:30}},[a("span",[t._v(t._s(t.$t("pipeline.mysqlUser")))])]),a("el-col",{staticStyle:{float:"right"},attrs:{span:70}},[a("span",[t._v(t._s(t.bitem.pipeline.mysql.user))])])],1),a("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:30}},[a("span",[t._v(t._s(t.$t("pipeline.mysqlServerId")))])]),a("el-col",{staticStyle:{float:"right"},attrs:{span:70}},[a("span",[t._v(t._s(t.bitem.pipeline.mysql.server_id))])])],1),a("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:30}},[a("span",[t._v(t._s(t.$t("pipeline.mysqlFlavor")))])]),a("el-col",{staticStyle:{float:"right"},attrs:{span:70}},[a("span",[t._v(t._s(t.bitem.pipeline.mysql.flavor))])])],1)],1)],1)},r=[],p=a("dfc2"),c=a("51a9"),u={components:{},props:{bitem:{type:Object,default:function(){return{pipeline:{type:Object,default:function(){return{status:"",mysql:{type:Object,default:function(){return{address:""}}}}}}}}}},methods:{dateFormat:function(t){return Object(p["a"])(t)},handleModifyStatus:function(){var t=this,e={name:this.bitem.pipeline.name,status:this.bitem.pipeline.status};Object(c["h"])(e).then((function(e){t.$notify({title:"success",message:"Success",type:"success",duration:2e3})}))}}},d=u,m=(a("623b"),a("2877")),_=Object(m["a"])(d,o,r,!1,null,"c712475c",null),f=_.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[void 0!==t.instance.pipeline_name?a("el-avatar",{staticStyle:{"background-color":"#2ac06d"},attrs:{icon:"el-icon-ship"}}):t._e(),void 0===t.instance.pipeline_name?a("el-avatar",{staticStyle:{"background-color":"#7a807d"},attrs:{icon:"el-icon-ship"}}):t._e()],1),a("el-col",{attrs:{span:6}},[a("el-row",[a("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.$t("instance.create_time")))])]),a("el-row",[a("span",[t._v(t._s(t.dateFormat(t.instance.create_time)))])])],1),a("el-col",{attrs:{span:6}},[a("el-row",[a("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.$t("instance.pipeline_name")))])]),a("el-row",[a("span",[t._v(t._s(t.instance.pipeline_name))])])],1),a("el-col",{attrs:{span:6}},[a("el-row",[a("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.$t("instance.node_name")))])]),a("el-row",[a("span",[t._v(" "+t._s(t.instance.node_name))])])],1)],1)],1)},b=[],g={filters:{},props:{type:{type:String,default:"CN"},instance:void 0},data:function(){return{list:[],loading:!1}},created:function(){},methods:{getList:function(){var t=this;this.loading=!0,this.$emit("create"),fetchList(this.listQuery).then((function(e){t.list=e.data.items,t.loading=!1}))},dateFormat:function(t){return Object(p["a"])(t)}}},h=g,y=Object(m["a"])(h,v,b,!1,null,null,null),w=y.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-row",[a("aside",[t._v(t._s(t.$t("pipe_detail.positionTip"))+" ")])]),a("el-card",[a("el-form",{attrs:{"label-position":"left","label-width":"auto",rules:t.rules}},[a("el-form-item",{attrs:{label:t.$t("pipeline.mysqlFlavor")}},[a("el-select",{model:{value:t.govern_form.mode,callback:function(e){t.$set(t.govern_form,"mode",e)},expression:"govern_form.mode"}},t._l(t.$t("pipeline.mysqlModeOptions"),(function(t){return a("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})})),1)],1),a("el-form-item",{attrs:{label:"Binlog File"}},[a("el-input",{attrs:{placeholder:"mysql-bin.012000",disabled:"gtid"===t.govern_form.mode},model:{value:t.govern_form.position.binlog_file,callback:function(e){t.$set(t.govern_form.position,"binlog_file",e)},expression:"govern_form.position.binlog_file"}})],1),a("el-form-item",{attrs:{label:"Binlog Position"}},[a("el-input",{attrs:{type:"number",placeholder:"25110009",disabled:"gtid"===t.govern_form.mode},model:{value:t.govern_form.position.binlog_position,callback:function(e){t.$set(t.govern_form.position,"binlog_position",t._n(e))},expression:"govern_form.position.binlog_position"}})],1),a("el-form-item",{attrs:{label:"Gtid Set"}},[a("el-input",{attrs:{placeholder:"045c649a-408d-11ec-ae21-0242ac110006:1-38",disabled:"position"===t.govern_form.mode},model:{value:t.govern_form.position.gtid_set,callback:function(e){t.$set(t.govern_form.position,"gtid_set",e)},expression:"govern_form.position.gtid_set"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updatePosition()}}},[t._v(t._s(t.$t("global.submit")))])],1)],1)],1)],1)],1)},S=[],x=a("b775"),O=a("83d6"),k=a.n(O);function j(t){return Object(x["a"])({url:k.a.host.api+"/api/position/get",method:"get",params:t})}function C(t){return Object(x["a"])({url:k.a.host.api+"/api/position/update",method:"post",data:t})}var q={filters:{},props:{type:{type:String,default:"CN"},instance:{},govern_form:{mode:"",position:{binlog_position:{type:Number}}},pipe_name:"",bitem:{}},data:function(){return{list:[],loading:!1,rules:{}}},created:function(){},methods:{dateFormat:function(t){return Object(p["a"])(t)},updatePosition:function(){var t=this;if(this.govern_form.mode!==this.bitem.mode){Object(c["g"])({name:this.bitem.pipeline.name,mode:this.govern_form.mode}).then((function(e){t.$message({type:"success",message:"Update binlog mode success!"}),t.bitem.pipeline.mysql.mode=t.govern_form.mode}));var e={mode:this.govern_form.mode,position:this.govern_form.position};e.position.pipeline_name=this.bitem.pipeline.name,C(e).then((function(e){t.$message({type:"success",message:"Update position success!"})}))}}}},F=q,R=Object(m["a"])(F,$,S,!1,null,null,null),D=R.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-row",[a("aside",[t._v(t._s(t.$t("pipe_detail.filterTip")))])]),a("el-row",{attrs:{model:t.validData}},[a("el-form",{attrs:{"label-position":t.top},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.validFilter(t.validData)}}},[a("el-form-item",{attrs:{label:t.$t("pipe_detail.validRule")}},[a("el-input",{on:{input:function(e){return t.clearValidResult(t.validData)}},model:{value:t.validData.rule,callback:function(e){t.$set(t.validData,"rule",e)},expression:"validData.rule"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.validFilter(t.validData)}}},[t._v(t._s(t.$t("pipe_detail.button_valid")))])],1)],1)],1),a("el-row",[!0===t.validResult?a("span",{attrs:{model:t.validResult}},[t._v(t._s(t.validData.rule)+" "+t._s(t.$t("pipe_detail.validTipTrue")))]):t._e(),!1===t.validResult?a("span",{attrs:{model:t.validResult}},[t._v(t._s(t.validData.rule)+" "+t._s(t.$t("pipe_detail.validTipFalse")))]):t._e()])],1),a("el-col",{attrs:{span:10}},[a("el-table",{attrs:{data:t.list,border:"",fit:"","highlight-current-row":"",width:"auto"}},[a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("pipeline.filter.type")},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return["white"===i.type?a("span",[t._v(t._s(t.$t("pipeline.filterValues.white")))]):t._e(),"black"===i.type?a("span",[t._v(t._s(t.$t("pipeline.filterValues.black")))]):t._e()]}}])}),a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("pipeline.filter.rule")},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.rule))])]}}])})],1)],1)],1)},T=[],N={filters:{},props:{type:{type:String,default:"CN"},filter:void 0,list:[],pipe_name:""},data:function(){return{loading:!1,validData:{},validResult:""}},created:function(){},methods:{dateFormat:function(t){return Object(p["a"])(t)},clearValidResult:function(){this.validResult=""},validFilter:function(t){var e=this,a={name:this.pipe_name,rule:t.rule};this.validResult="",Object(c["d"])(a).then((function(t){e.validResult=t.data}))}}},P=N,I=Object(m["a"])(P,E,T,!1,null,null,null),M=I.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("aside",[t._v(t._s(t.$t("pipe_detail.eventTip"))+" ")]),a("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("pipe_detail.event_table.type")},scopedSlots:t._u([{key:"default",fn:function(e){return["info"===e.row.type?a("span",[a("i",{staticClass:"el-icon-info",staticStyle:{color:"#2ac06d"}}),t._v(" INFO")]):t._e(),"warn"===e.row.type?a("span",[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"yellow"}}),t._v(" WARNING")]):t._e(),"error"===e.row.type?a("span",[a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}}),t._v(" ERROR")]):t._e()]}}])}),a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("pipe_detail.event_table.first_time")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.dateFormat(e.row.first_time)))])]}}])}),a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("pipe_detail.event_table.last_time")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.dateFormat(e.row.last_time)))])]}}])}),a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("pipe_detail.event_table.message")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.message))])]}}])}),a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("pipe_detail.event_table.count")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.count))])]}}])}),a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("pipe_detail.event_table.node_name")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.node_name))])]}}])}),a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("pipe_detail.event_table.node_ip")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.node_ip))])]}}])})],1)],1)},V=[];function z(t){return Object(x["a"])({url:k.a.host.api+"/api/event/list",method:"get",params:t})}var G={props:{pipe_name:"",list:[]},data:function(){return{list:this.list,loading:!1}},created:function(){},methods:{dateFormat:function(t){return Object(p["a"])(t)}}},A=G,B=Object(m["a"])(A,U,V,!1,null,null,null),J=B.exports,L={name:"Profile",components:{InfoCard:f,Instance:w,Govern:D,Pfilter:M,Event:J},data:function(){return{pipe_name:void 0,bitem:{info:{instance:{}},pipeline:{status:""}},user:{},activeTab:"filter",govern_form:{mode:"",position:{binlog_file:"",binlog_position:{type:Number},gtid_set:""}},events:[]}},computed:Object(s["a"])({},Object(l["b"])(["name","avatar","roles"])),created:function(){this.pipe_name=this.$route.params&&this.$route.params.name,this.getItem(),this.getUser(),this.getPosition(),this.getEvent()},methods:{getUser:function(){this.user={name:this.name,role:this.roles.join(" | "),email:"admin@test.com",avatar:this.avatar}},getItem:function(){var t=this,e={name:this.pipe_name};Object(c["c"])(e).then((function(e){t.bitem=e.data,t.govern_form.mode=t.bitem.pipeline.mysql.mode}))},getPosition:function(){var t=this,e={pipe_name:this.pipe_name};j(e).then((function(e){t.govern_form.position=Object.assign({},e.data)}))},getEvent:function(){var t=this,e={res_type:"pipeline",res_name:this.pipe_name};z(e).then((function(e){t.events=e.data.items}))}}},H=L,Q=Object(m["a"])(H,i,n,!1,null,null,null);e["default"]=Q.exports}}]);