(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a7a9da4"],{"1ed7":function(t,e,i){},"51a9":function(t,e,i){"use strict";i.d(e,"e",(function(){return l})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return r})),i.d(e,"f",(function(){return p})),i.d(e,"h",(function(){return c})),i.d(e,"g",(function(){return u})),i.d(e,"b",(function(){return d})),i.d(e,"d",(function(){return m}));var a=i("b775"),n=i("83d6"),s=i.n(n);function l(t){return Object(a["a"])({url:s.a.host.api+"/api/pipeline/list",method:"get",params:t})}function o(t){return Object(a["a"])({url:s.a.host.api+"/api/pipeline/get",method:"get",params:t})}function r(t){return Object(a["a"])({url:s.a.host.api+"/api/pipeline/create",method:"post",data:t})}function p(t){return Object(a["a"])({url:s.a.host.api+"/api/pipeline/update",method:"post",data:t})}function c(t){return Object(a["a"])({url:s.a.host.api+"/api/pipeline/update/status",method:"post",data:t})}function u(t){return Object(a["a"])({url:s.a.host.api+"/api/pipeline/update/mode",method:"post",data:t})}function d(t){return Object(a["a"])({url:s.a.host.api+"/api/pipeline/delete",method:"post",data:t})}function m(t){return Object(a["a"])({url:s.a.host.api+"/api/pipeline/is_filter",method:"get",params:t})}},"623b":function(t,e,i){"use strict";i("1ed7")},dfc2:function(t,e,i){"use strict";function a(t){if(""===t||void 0===t)return"";var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}i.d(e,"a",(function(){return a}))},f68b:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8,xs:24}},[i("info-card",{attrs:{bitem:t.bitem}})],1),i("el-col",{attrs:{span:14,xs:24}},[i("el-card",[i("el-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[i("el-tab-pane",{attrs:{label:t.$t("pipe_detail.filter"),name:"filter"}},[i("pfilter",{attrs:{list:t.bitem.pipeline.filters,pipe_name:t.bitem.pipeline.name}})],1),i("el-tab-pane",{attrs:{label:t.$t("pipe_detail.govern"),name:"govern"}},[i("govern",{attrs:{governForm:t.governForm,bitem:t.bitem,instance:t.bitem.info.instance,pipe_name:t.bitem.pipeline.name}})],1),i("el-tab-pane",{attrs:{label:t.$t("pipe_detail.instance"),name:"instance"}},[i("instance",{attrs:{instance:t.bitem.info.instance}})],1)],1)],1)],1)],1)],1)},n=[],s=i("5530"),l=(i("a9e3"),i("b0c0"),i("a15b"),i("2f62")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",{staticStyle:{"margin-bottom":"20px"},attrs:{shadow:"always"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v(t._s(t.$t("pipe_detail.runStatus")))]),i("el-switch",{staticStyle:{float:"right",padding:"3px 0",display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"run","inactive-value":"stop"},on:{change:t.handleModifyStatus},model:{value:t.bitem.pipeline.status,callback:function(e){t.$set(t.bitem.pipeline,"status",e)},expression:"bitem.pipeline.status"}})],1),i("el-card",{staticStyle:{"margin-bottom":"18px"},attrs:{shadow:"never"}},[i("div",{staticClass:"user-profile"},[i("div",{staticClass:"box-center"},[i("div",{staticClass:"user-name text-center"},[t._v(t._s(t.bitem.pipeline.aliasName))]),i("div",{staticClass:"user-role text-center text-muted"},[t._v(t._s(t.bitem.pipeline.name))])])])]),i("el-card",{staticStyle:{"margin-bottom":"18px"}},[i("div",{staticClass:"user-bio"},[i("div",{staticClass:"user-education user-bio-section"},[i("div",{staticClass:"user-bio-section-header"},[i("svg-icon",{attrs:{"icon-class":"education"}}),i("span",[t._v(t._s(t.$t("pipe_detail.remark")))])],1),i("div",{staticClass:"user-bio-section-body"},[i("div",{staticClass:"text-muted"},[t._v(t._s(t.bitem.pipeline.remark))])])])])]),i("el-card",[i("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:30}},[i("span",[t._v(t._s(t.$t("pipeline.createTime")))])]),i("el-col",{staticStyle:{float:"right"},attrs:{span:70}},[i("span",[t._v(t._s(t.dateFormat(t.bitem.pipeline.create_time)))])])],1),i("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:30}},[i("span",[t._v(t._s(t.$t("pipeline.mysqlMode")))])]),i("el-col",{staticStyle:{float:"right"},attrs:{span:70}},t._l(t.$t("pipeline.mysqlModeOptions"),(function(e){return i("div",{staticClass:"text-muted"},[e.key===t.bitem.pipeline.mysql.mode?i("span",[t._v(t._s(e.value))]):t._e()])})),0)],1),i("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:30}},[i("span",[t._v(t._s(t.$t("pipeline.output.sender.type")))])]),i("el-col",{staticStyle:{float:"right"},attrs:{span:70}},t._l(t.$t("pipeline.output.sender.typeOptions"),(function(e){return i("div",{staticClass:"text-muted"},[e.key===t.bitem.pipeline.output.sender.type?i("span",[t._v(t._s(e.value))]):t._e()])})),0)],1),i("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:30}},[i("span",[t._v(t._s(t.$t("pipeline.mysqlAddress")))])]),i("el-col",{staticStyle:{float:"right"},attrs:{span:70}},[t._v(" "+t._s(t.bitem.pipeline.mysql.address)+" ")])],1),i("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:30}},[i("span",[t._v(t._s(t.$t("pipeline.mysqlPort")))])]),i("el-col",{staticStyle:{float:"right"},attrs:{span:70}},[i("span",[t._v(t._s(t.bitem.pipeline.mysql.port))])])],1),i("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:30}},[i("span",[t._v(t._s(t.$t("pipeline.mysqlUser")))])]),i("el-col",{staticStyle:{float:"right"},attrs:{span:70}},[i("span",[t._v(t._s(t.bitem.pipeline.mysql.user))])])],1),i("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:30}},[i("span",[t._v(t._s(t.$t("pipeline.mysqlServerId")))])]),i("el-col",{staticStyle:{float:"right"},attrs:{span:70}},[i("span",[t._v(t._s(t.bitem.pipeline.mysql.server_id))])])],1),i("el-row",{staticStyle:{"margin-bottom":"18px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:30}},[i("span",[t._v(t._s(t.$t("pipeline.mysqlFlavor")))])]),i("el-col",{staticStyle:{float:"right"},attrs:{span:70}},[i("span",[t._v(t._s(t.bitem.pipeline.mysql.flavor))])])],1)],1)],1)},r=[],p=i("dfc2"),c=i("51a9"),u={components:{},props:{bitem:{type:Object,default:function(){return{pipeline:{type:Object,default:function(){return{status:"",mysql:{type:Object,default:function(){return{address:""}}}}}}}}}},methods:{dateFormat:function(t){return Object(p["a"])(t)},handleModifyStatus:function(){var t=this,e={name:this.bitem.pipeline.name,status:this.bitem.pipeline.status};Object(c["h"])(e).then((function(e){t.$notify({title:"success",message:"Success",type:"success",duration:2e3})}))}}},d=u,m=(i("623b"),i("2877")),v=Object(m["a"])(d,o,r,!1,null,"c712475c",null),f=v.exports,b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:6}},[void 0!==t.instance.pipeline_name?i("el-avatar",{staticStyle:{"background-color":"#2ac06d"},attrs:{icon:"el-icon-ship"}}):t._e(),void 0===t.instance.pipeline_name?i("el-avatar",{staticStyle:{"background-color":"#7a807d"},attrs:{icon:"el-icon-ship"}}):t._e()],1),i("el-col",{attrs:{span:6}},[i("el-row",[i("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.$t("instance.create_time")))])]),i("el-row",[i("span",[t._v(t._s(t.dateFormat(t.instance.create_time)))])])],1),i("el-col",{attrs:{span:6}},[i("el-row",[i("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.$t("instance.pipeline_name")))])]),i("el-row",[i("span",[t._v(t._s(t.instance.pipeline_name))])])],1),i("el-col",{attrs:{span:6}},[i("el-row",[i("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.$t("instance.node_name")))])]),i("el-row",[i("span",[t._v(" "+t._s(t.instance.node_name))])])],1)],1)],1)},_=[],g={filters:{},props:{type:{type:String,default:"CN"},instance:void 0},data:function(){return{list:[],loading:!1}},created:function(){},methods:{getList:function(){var t=this;this.loading=!0,this.$emit("create"),fetchList(this.listQuery).then((function(e){t.list=e.data.items,t.loading=!1}))},dateFormat:function(t){return Object(p["a"])(t)}}},h=g,y=Object(m["a"])(h,b,_,!1,null,null,null),$=y.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},[i("el-row",[i("aside",[t._v(t._s(t.$t("pipe_detail.positionTip"))+" ")])]),i("el-card",[i("el-form",{attrs:{"label-position":"left","label-width":"auto",rules:t.rules}},[i("el-form-item",{attrs:{label:t.$t("pipeline.mysqlFlavor")}},[i("el-select",{model:{value:t.governForm.mode,callback:function(e){t.$set(t.governForm,"mode",e)},expression:"governForm.mode"}},t._l(t.$t("pipeline.mysqlModeOptions"),(function(t){return i("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})})),1)],1),i("el-form-item",{attrs:{label:"Binlog File"}},[i("el-input",{attrs:{placeholder:"mysql-bin.012000",disabled:"gtid"===t.governForm.mode},model:{value:t.governForm.position.binlog_file,callback:function(e){t.$set(t.governForm.position,"binlog_file",e)},expression:"governForm.position.binlog_file"}})],1),i("el-form-item",{attrs:{label:"Binlog Position"}},[i("el-input",{attrs:{type:"number",placeholder:"25110009",disabled:"gtid"===t.governForm.mode},model:{value:t.governForm.position.binlog_position,callback:function(e){t.$set(t.governForm.position,"binlog_position",t._n(e))},expression:"governForm.position.binlog_position"}})],1),i("el-form-item",{attrs:{label:"Gtid Set"}},[i("el-input",{attrs:{placeholder:"045c649a-408d-11ec-ae21-0242ac110006:1-38",disabled:"position"===t.governForm.mode},model:{value:t.governForm.position.gtid_set,callback:function(e){t.$set(t.governForm.position,"gtid_set",e)},expression:"governForm.position.gtid_set"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updatePosition()}}},[t._v(t._s(t.$t("global.submit")))])],1)],1)],1)],1)],1)},F=[],x=i("b775"),S=i("83d6"),O=i.n(S);function j(t){return Object(x["a"])({url:O.a.host.api+"/api/position/get",method:"get",params:t})}function k(t){return Object(x["a"])({url:O.a.host.api+"/api/position/update",method:"post",data:t})}var q={filters:{},props:{type:{type:String,default:"CN"},instance:{},governForm:{mode:"",position:{binlog_position:{type:Number}}},pipe_name:"",bitem:{}},data:function(){return{list:[],loading:!1,rules:{}}},created:function(){},methods:{dateFormat:function(t){return Object(p["a"])(t)},updatePosition:function(){var t=this;if(this.governForm.mode!==this.bitem.mode){Object(c["g"])({name:this.bitem.pipeline.name,mode:this.governForm.mode}).then((function(e){t.$message({type:"success",message:"Update binlog mode success!"}),t.bitem.pipeline.mysql.mode=t.governForm.mode}));var e={mode:this.governForm.mode,position:this.governForm.position};e.position.pipeline_name=this.bitem.pipeline.name,k(e).then((function(e){t.$message({type:"success",message:"Update position success!"})}))}}}},C=q,D=Object(m["a"])(C,w,F,!1,null,null,null),R=D.exports,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:10}},[i("el-row",[i("aside",[t._v(t._s(t.$t("pipe_detail.filterTip")))])]),i("el-row",{attrs:{model:t.validData}},[i("el-form",{attrs:{"label-position":t.top},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.validFilter(t.validData)}}},[i("el-form-item",{attrs:{label:t.$t("pipe_detail.validRule")}},[i("el-input",{on:{input:function(e){return t.clearValidResult(t.validData)}},model:{value:t.validData.rule,callback:function(e){t.$set(t.validData,"rule",e)},expression:"validData.rule"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.validFilter(t.validData)}}},[t._v(t._s(t.$t("pipe_detail.button_valid")))])],1)],1)],1),i("el-row",[!0===t.validResult?i("span",{attrs:{model:t.validResult}},[t._v(t._s(t.validData.rule)+" "+t._s(t.$t("pipe_detail.validTipTrue")))]):t._e(),!1===t.validResult?i("span",{attrs:{model:t.validResult}},[t._v(t._s(t.validData.rule)+" "+t._s(t.$t("pipe_detail.validTipFalse")))]):t._e()])],1),i("el-col",{attrs:{span:10}},[i("el-table",{attrs:{data:t.list,border:"",fit:"","highlight-current-row":"",width:"auto"}},[i("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("pipeline.filter.type")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return t._l(t.$t("pipeline.filterOptions"),(function(e){return i("div",[a.type===e.key?i("span",[t._v(t._s(e.value))]):t._e()])}))}}])}),i("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("pipeline.filter.rule")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("span",[t._v(t._s(a.rule))])]}}])})],1)],1)],1)},P=[],M={filters:{},props:{type:{type:String,default:"CN"},filter:void 0,list:[],pipe_name:""},data:function(){return{loading:!1,validData:{},validResult:""}},created:function(){},methods:{dateFormat:function(t){return Object(p["a"])(t)},clearValidResult:function(){this.validResult=""},validFilter:function(t){var e=this,i={name:this.pipe_name,rule:t.rule};this.validResult="",Object(c["d"])(i).then((function(t){e.validResult=t.data}))}}},E=M,N=Object(m["a"])(E,T,P,!1,null,null,null),I=N.exports,U={name:"Profile",components:{InfoCard:f,Instance:$,Govern:R,Pfilter:I},data:function(){return{pipe_name:void 0,bitem:{info:{instance:{}},pipeline:{status:""}},user:{},activeTab:"filter",governForm:{mode:"",position:{binlog_file:"",binlog_position:{type:Number},gtid_set:""}}}},computed:Object(s["a"])({},Object(l["b"])(["name","avatar","roles"])),created:function(){this.pipe_name=this.$route.params&&this.$route.params.name,this.getItem(),this.getUser(),this.getPosition()},methods:{getUser:function(){this.user={name:this.name,role:this.roles.join(" | "),email:"admin@test.com",avatar:this.avatar}},getItem:function(){var t=this,e={name:this.pipe_name};Object(c["c"])(e).then((function(e){t.bitem=e.data,t.governForm.mode=t.bitem.pipeline.mysql.mode}))},getPosition:function(){var t=this,e={pipe_name:this.pipe_name};j(e).then((function(e){t.governForm.position=Object.assign({},e.data)}))}}},z=U,B=Object(m["a"])(z,a,n,!1,null,null,null);e["default"]=B.exports}}]);