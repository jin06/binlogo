(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3678904c"],{3520:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6,xs:24}},[a("info-card",{attrs:{bcluster:t.bcluster}})],1),a("el-col",{attrs:{span:18,xs:24}},[a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{key:"election",attrs:{label:t.$t("cluster.tabMap.election.label"),name:"election"}},[a("keep-alive",[a("election",{attrs:{type:"election"}})],1)],1),a("el-tab-pane",{key:"register",attrs:{label:t.$t("cluster.tabMap.register.label"),name:"register"}},[a("keep-alive",[a("register",{attrs:{type:"register"}})],1)],1),a("el-tab-pane",{key:"instance",attrs:{label:t.$t("cluster.tabMap.instance.label"),name:"instance"}},[a("keep-alive",[a("instance",{attrs:{type:"instance"}})],1)],1)],1)],1)],1)],1)],1)},i=[],r=(a("99af"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticStyle:{"margin-bottom":"20px"},attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.$t("cluster.title")))])]),a("el-card",{staticStyle:{"margin-bottom":"18px"},attrs:{shadow:"never"}},[a("div",{staticClass:"user-profile"},[a("div",{staticClass:"box-center"},[a("div",{staticClass:"user-name text-center"},[t._v(t._s(t.bcluster.name))]),a("div",{staticClass:"user-role text-center text-muted"},[t._v(t._s(t.$t("cluster.name")))])])])])],1)}),s=[],l=a("dfc2"),o=(a("51a9"),{components:{},props:{bcluster:{}},methods:{dateFormat:function(t){return Object(l["a"])(t)}}}),u=o,c=(a("565a"),a("2877")),p=Object(c["a"])(u,r,s,!1,null,"fb62eff4",null),d=p.exports,f=a("b775"),m=a("83d6"),h=a.n(m);function g(t){return Object(f["a"])({url:h.a.host.api+"/api/cluster/get",method:"get",params:t})}function b(t){return Object(f["a"])({url:h.a.host.api+"/api/cluster/list/register",method:"get",params:t})}function _(t){return Object(f["a"])({url:h.a.host.api+"/api/cluster/list/election",method:"get",params:t})}var v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block"},[a("el-timeline",{staticStyle:{"margin-top":"55px"}},t._l(t.timeline,(function(e,n){return a("el-timeline-item",{key:n,attrs:{timestamp:e.create_revision,color:e.color,type:e.type,icon:e.icon,size:e.size}},[t._v(" "+t._s(e.node)+" ")])})),1)],1)},y=[],w=(a("d3b7"),a("159b"),{data:function(){return{timeline:[]}},created:function(){this.getList()},methods:{getList:function(){var t=this;_().then((function(e){t.timeline=e.data.items,t.timeline.forEach((function(t,e){0===e&&(t.type="primary",t.size="large",t.icon='el-icon-star-on"',t.remark="master"),1===e&&(t.type="warning",t.size="normal",t.icon='el-icon-star-off"',t.remark="heir")}))}))}}}),$=w,x=Object(c["a"])($,v,y,!1,null,null,null),k=x.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("aside",{staticStyle:{"margin-bottom":"50px","margin-top":"20px"}},[t._v(t._s(t.$t("cluster.instanceTip")))]),a("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("instance.create_time")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.dateFormat(e.row.create_time)))])]}}])}),a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("instance.pipeline_name")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pipeline_name))])]}}])}),a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("instance.node_name")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.node_name))])]}}])})],1),a("el-pagination",{attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}})],1)},O=[];function S(t){return Object(f["a"])({url:h.a.host.api+"/api/instance/list",method:"get",params:t})}var Q={filters:{statusFilter:function(t){var e={published:"success",draft:"info",deleted:"danger"};return e[t]}},props:{type:{type:String,default:"CN"}},data:function(){return{list:null,total:0,listQuery:{page:1,limit:10,type:this.type,sort:"+id"},loading:!1}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,this.$emit("create"),S(this.listQuery).then((function(e){t.list=e.data.items,t.loading=!1,t.total=e.data.total}))},dateFormat:function(t){return Object(l["a"])(t)}}},C=Q,F=Object(c["a"])(C,j,O,!1,null,null,null),L=F.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("aside",{staticStyle:{"margin-bottom":"50px","margin-top":"20px"}},[t._v(t._s(t.$t("cluster.registerTip")))]),a("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("register.create_time")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.dateFormat(e.row.create_time)))])]}}])}),a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("register.name")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}])}),a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("register.ip")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.ip))])]}}])}),a("el-table-column",{attrs:{width:"auto",align:"center",label:t.$t("register.version")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.version))])]}}])})],1),a("el-pagination",{attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}})],1)},E=[],M={filters:{statusFilter:function(t){var e={published:"success",draft:"info",deleted:"danger"};return e[t]}},props:{type:{type:String,default:"CN"}},data:function(){return{total:0,list:null,listQuery:{page:1,limit:10,type:this.type,sort:"+id"},loading:!1}},created:function(){this.listQuery.page=1,this.getList()},methods:{getList:function(){var t=this;this.loading=!0,this.$emit("create"),b(this.listQuery).then((function(e){t.list=e.data.items,t.total=e.data.total,t.loading=!1}))},dateFormat:function(t){return Object(l["a"])(t)}}},z=M,I=Object(c["a"])(z,N,E,!1,null,null,null),D=I.exports,J={name:"Profile",components:{InfoCard:d,Election:k,Instance:L,Register:D},data:function(){return{bcluster:{},activeName:"election"}},watch:{activeName:function(t){this.$router.push("".concat(this.$route.path,"?tab=").concat(t))}},created:function(){var t=this.$route.query.tab;t&&(this.activeName=t),this.getClusterInfo()},methods:{getClusterInfo:function(){var t=this;g().then((function(e){t.bcluster=e.data}))}}},T=J,q=Object(c["a"])(T,n,i,!1,null,null,null);e["default"]=q.exports},"51a9":function(t,e,a){"use strict";a.d(e,"e",(function(){return s})),a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return o})),a.d(e,"f",(function(){return u})),a.d(e,"h",(function(){return c})),a.d(e,"g",(function(){return p})),a.d(e,"b",(function(){return d})),a.d(e,"d",(function(){return f}));var n=a("b775"),i=a("83d6"),r=a.n(i);function s(t){return Object(n["a"])({url:r.a.host.api+"/api/pipeline/list",method:"get",params:t})}function l(t){return Object(n["a"])({url:r.a.host.api+"/api/pipeline/get",method:"get",params:t})}function o(t){return Object(n["a"])({url:r.a.host.api+"/api/pipeline/create",method:"post",data:t})}function u(t){return Object(n["a"])({url:r.a.host.api+"/api/pipeline/update",method:"post",data:t})}function c(t){return Object(n["a"])({url:r.a.host.api+"/api/pipeline/update/status",method:"post",data:t})}function p(t){return Object(n["a"])({url:r.a.host.api+"/api/pipeline/update/mode",method:"post",data:t})}function d(t){return Object(n["a"])({url:r.a.host.api+"/api/pipeline/delete",method:"post",data:t})}function f(t){return Object(n["a"])({url:r.a.host.api+"/api/pipeline/is_filter",method:"get",params:t})}},"565a":function(t,e,a){"use strict";a("f289")},dfc2:function(t,e,a){"use strict";function n(t){if(""===t||void 0===t)return"";var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}a.d(e,"a",(function(){return n}))},f289:function(t,e,a){}}]);